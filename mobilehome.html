<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<style type="text/css">
html { 
	height: 100%; 
	margin: 0px; 
	padding: 0px;
	background: url('http://www.afterjugo.com/public/blog/wp-content/uploads/2010/11/AAA0205.jpg') no-repeat center center fixed;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover; 
	}
body { 
    height: 100%; 
	margin: 0px; 
	padding: 0px; 
	overflow: hidden; 
	font: normal 12px "Lucida Grande", "Lucida Sans Unicode", "Lucida Sans", Geneva, Verdana, sans-serif;
	}
#main{width:1050px; margin: 0 auto;}

#map_canvas {
	margin: 0 auto; 
	-moz-box-shadow: 0px 0px 7px #000;
	-webkit-box-shadow: 0px 0px 7px #000;
	box-shadow: 0px 0px 7px #000;
	}

#center_start{
	width:600px; 
	margin-top:250px; 
	margin-left:225px; 
	text-align: center; 
	z-index: 3;
	text-align: center;
 	padding: 20px;
    background: -webkit-gradient(linear, left top, left bottom, from(#ff6666), to(#541212));
    background: -moz-linear-gradient(top,  #ff6666,  #541212);
    border-radius: 20px;
    -moz-border-radius: 20px;
    -webkit-border-radius: 20px;
    -webkit-box-shadow: 0px 1px 0px #000;
    border: 1px #1a2638 solid;
	}
	
.logoimage{
	margin-top: 5px;
	-moz-box-shadow: 0px 0px 5px #000;
	-webkit-box-shadow: 0px 0px 5px #000;
	box-shadow: 0px 0px 5px #000;
}

.searchButton{
	cursor: pointer;
    color: #fff;
    font-weight: bold;
    height:70px;
    padding:0px;
    width: 140px;
    margin-left: 20px;
    font-size:24px;
    text-shadow: 0px 2px 3px #000;
    -webkit-box-shadow: 1px 1px 0px #000;
    background: -webkit-gradient(linear, left top, left bottom, from(#d7e5f5), to(#cbe0f5));
    background: -moz-linear-gradient(top,  #d7e5f5,  #cbe0f5);
}
.searchButton:hover
{
    background: -webkit-gradient(linear, left top, left bottom, from(#ccd9e8), to(#c1d4e8));
    background: -moz-linear-gradient(top,  #ccd9e8,  #c1d4e8);
}
.searchButton:active
{
    -webkit-box-shadow: -1px -1px 0px #000;
    background: -webkit-gradient(linear, left top, left bottom, from(#ccd9e8), to(#c1d4e8));
    background: -moz-linear-gradient(top,  #ccd9e8,  #c1d4e8);
}

#center_next{padding:10px; margin-top:70px; visibility:hidden;}
#buttons{position:absolute; right: 50%; top: 20px; z-index: 2;}

.cupid-blue {
	  background-color: #d7e5f5;
	  background-image: -webkit-gradient(linear, left top, left bottom, from(#d7e5f5), to(#cbe0f5));
	  /* Saf4+, Chrome */
	  background-image: -webkit-linear-gradient(top, #d7e5f5, #cbe0f5);
	  background-image: -moz-linear-gradient(top, #d7e5f5, #cbe0f5);
	  background-image: -ms-linear-gradient(top, #d7e5f5, #cbe0f5);
	  background-image: -o-linear-gradient(top, #d7e5f5, #cbe0f5);
	  background-image: linear-gradient(top, #d7e5f5, #cbe0f5);
	  border-top: 1px solid #abbbcc;
	  border-left: 1px solid #a7b6c7;
	  border-bottom: 1px solid #a1afbf;
	  border-right: 1px solid #a7b6c7;
	  -webkit-border-radius: 12px;
	  -moz-border-radius: 12px;
	  -ms-border-radius: 12px;
	  -o-border-radius: 12px;
	  border-radius: 12px;
	  -webkit-box-shadow: inset 0 1px 0 0 white;
	  -moz-box-shadow: inset 0 1px 0 0 white;
	  -ms-box-shadow: inset 0 1px 0 0 white;
	  -o-box-shadow: inset 0 1px 0 0 white;
	  box-shadow: inset 0 1px 0 0 white;
	  color: #1a3e66;
	  font: normal 11px "Lucida Grande", "Lucida Sans Unicode", "Lucida Sans", Geneva, Verdana, sans-serif;
	  line-height: 1;
	  padding: 6px 0 7px 0;
	  text-align: center;
	  text-shadow: 0 1px 1px #fff;
	  width: 160px; 
}
  
.cupid-blue:hover {
	background-color: #ccd9e8;
	background-image: -webkit-gradient(linear, left top, left bottom, from(#ccd9e8), to(#c1d4e8));
	/* Saf4+, Chrome */
	background-image: -webkit-linear-gradient(top, #ccd9e8, #c1d4e8);
	background-image: -moz-linear-gradient(top, #ccd9e8, #c1d4e8);
	background-image: -ms-linear-gradient(top, #ccd9e8, #c1d4e8);
	background-image: -o-linear-gradient(top, #ccd9e8, #c1d4e8);
	background-image: linear-gradient(top, #ccd9e8, #c1d4e8);
	border-top: 1px solid #a1afbf;
	border-left: 1px solid #9caaba;
	border-bottom: 1px solid #96a3b3;
	border-right: 1px solid #9caaba;
	-webkit-box-shadow: inset 0 1px 0 0 #f2f2f2;
	-moz-box-shadow: inset 0 1px 0 0 #f2f2f2;
	-ms-box-shadow: inset 0 1px 0 0 #f2f2f2;
	-o-box-shadow: inset 0 1px 0 0 #f2f2f2;
	box-shadow: inset 0 1px 0 0 #f2f2f2;
	color: #163659;
	cursor: pointer; 
}

.cupid-blue:active {
    border: 1px solid #8c98a7;
    -webkit-box-shadow: inset 0 0 4px 2px #abbccf, 0 0 1px 0 #eeeeee;
    -moz-box-shadow: inset 0 0 4px 2px #abbccf, 0 0 1px 0 #eeeeee;
    -ms-box-shadow: inset 0 0 4px 2px #abbccf, 0 0 1px 0 #eeeeee;
    -o-box-shadow: inset 0 0 4px 2px #abbccf, 0 0 1px 0 #eeeeee;
    box-shadow: inset 0 0 4px 2px #abbccf, 0 0 1px 0 #eeeeee; 
}

input {
   font-size: 16px;
   margin-right: 3px;
   padding: 15px;	
   border:none;
   -webkit-border-radius:10px;
   -moz-border-radius:10px;
   border-radius:10px;
   -webkit-box-shadow:0 0 5px #666 inset;
   -moz-box-shadow:0 0 5px #666 inset;
   box-shadow:0 0 5px #666 inset;
   text-shadow: 0px 0px 1px #000;
   height:50px;
   width:350px;
   text-indent:5px;
   background: -webkit-gradient(linear, left top, left bottom, from(#ffffff), to(#efefef));
   background: -moz-linear-gradient(top,  #ffffff,  #efefef);
}

input:focus { 
	outline:none; 
	-moz-box-shadow: 0px 0px 7px #000;
	-webkit-box-shadow: 0px 0px 7px #000;
	box-shadow: 0px 0px 7px #000;
}

h1{
	font-size: 50px;
    margin: 0;
    padding: 0;
    color: #fff;
    font-family: Arial;
    text-shadow: 0px 2px 3px #000;
    color: #fff; 
}
.main_title{position: absolute; top: 180px; margin: 0 auto; width: 600px; margin-left:225px; text-align: center;}

h2{
	font-size: 16px;
    margin: 10px;
    padding: 0;
    color: #fff;
    font-family: Arial;
    text-shadow: 0px 2px 3px #000;
}

span{
	font-size: 20px;
    margin: 0px;
    padding: 0;
    color: #fff;
    font-family: Arial;
    text-shadow: 0px 0px 1px #000;
}
.copyright{position: absolute; top: 580px; margin: 0 auto; width: 600px; margin-left:245px; }


</style>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<script type=text/javascript>
  var geocoder;
  var map;
  var centermap;
  var tableid = 1128316;
  
  function runScript(e) {
    if (e.keyCode == 13) 
        codeAddress();
  }
  
  function initialize() {
    geocoder = new google.maps.Geocoder();
    var latlng = new google.maps.LatLng(51.5010, -0.12617);
    var myOptions = {
      zoom: 14,
      center: latlng,
      disableDefaultUI: true,
      navigationControl: true,
      navigationControlOptions: {style: google.maps.NavigationControlStyle.SMALL},
      mapTypeId: 'roadmap'
    }
    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
    $('#center_next').css('visibility', 'hidden');
    
   
    $('#address').focus(function() {
      $(this).val('');
    }); 
  }

  function codeAddress() {
  	initialize();
    address = document.getElementById("address").value;
    geocoder.geocode( { 'address': address}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        map.setCenter(results[0].geometry.location);
       	centermap = results[0].geometry.location;
        var marker = new google.maps.Marker({
            map: map,
            position: centermap
        });
        $('#center_start').hide();
        $('#center_next').css('visibility', 'visible');
      } else {
        alert("Geocode was not successful for the following reason: " + status);
      }
    });
  }
  
  function retrievePlaces() {
  	layer = new google.maps.FusionTablesLayer(tableid);
  	layer.setMap(map);
  	layer.setQuery("SELECT * FROM "+tableid+" WHERE ST_INTERSECTS(geo, CIRCLE(LATLNG"+centermap+", 2000))");
  
    circle = new google.maps.Circle({
	    center: centermap,
	    radius: 2000,
	    map: map,
	    fillOpacity: 0.2,
	    strokeOpacity: 0.5,
	    strokeWeight: 1
  	});	
  }

</script>
</head>
<body onload="initialize()">
<div id="main">

<h1 class="main_title">GuerrillaGardening App</h1>	

<div id="center_start">		
<img class="logoimage" src="http://profile.ak.fbcdn.net/hprofile-ak-snc4/50275_10775038726_4018_n.jpg" height="150px" alt="logo">
<h2>Digit a post code or address to find the nearest guerrilla plot:</h2>
<input type="textbox" id="address" value="SW1P 3JS or Westminster, London"  size="50" maxlength="100" onkeypress="runScript(event)">
<input type="button" class="searchButton" value="Search" onclick="codeAddress()" >
</div>
<span class="copyright">Please sent us an email to communicate other guerrilla places and their coordinates at <a href="mailto:lorenzo.urbini@dods.co.uk" >lorenzo.urbini@dods.co.uk</a></span>

<div id="center_next">
	
<div id="buttons">
<input type="button" class="cupid-blue" value="Search the closer plot" onclick="retrievePlaces()">
<input type="button" class="cupid-blue" value="Search for a different place" onclick="window.location.reload()">
</div>

<div id="map_canvas" style="width: 1000px; height: 750px;"></div>
</div>

</div>

</body>
</html>